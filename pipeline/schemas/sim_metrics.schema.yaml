$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://nba-dfs.schemas/sim_metrics.schema.yaml"
title: "Simulation Metrics"
description: "Aggregate ROI, finish distributions, and duplication stats for a simulation run."
version: "0.2.0"
type: object
additionalProperties: false
properties:
  roi:
    type: object
    additionalProperties: false
    properties:
      mean: { type: number }
      stdev: { type: number }
      p50: { type: number }
      p95: { type: number }
    required: [mean, stdev, p50, p95]
  finish_pctiles:
    type: object
    additionalProperties: false
    properties:
      p1: { type: number }
      p10: { type: number }
      cash: { type: number }
    required: [p1, p10, cash]
  duplication:
    type: object
    additionalProperties: false
    properties:
      unique_fraction: { type: number }
      dup_fraction: { type: number }
      dup_bins:
        type: array
        items:
          type: array
          items:
            - { type: integer }
            - { type: number }
          minItems: 2
          maxItems: 2
    required: [unique_fraction, dup_fraction, dup_bins]
required: [roi, finish_pctiles, duplication]
examples:
  - roi:
      mean: 0.0
      stdev: 0.3
      p50: -0.05
      p95: 1.1
    finish_pctiles:
      p1: 0.01
      p10: 0.12
      cash: 0.45
    duplication:
      unique_fraction: 0.7
      dup_fraction: 0.3
      dup_bins: [[2, 0.2], [3, 0.1]]
  - # invalid: missing roi
    finish_pctiles: {}
    duplication: {}
